language: bash
services: docker
env:
  global:
  - secure: N2tUHtGBOWOxMMWoHdlCTTTLvFWBbERzlg7V7EPMAFSkJf8ZahKBLeiHzk2ZPN+ibo6sKd9gjnNFSiaEpq2DO19oJGJGZXOFxPuXVG1q8wFVzZrMFeT6MVMdAFRyveDW6WjHK0P07lImpxTGLqTy2D6aYWhMgESlseQx80B1fTziZyLITsSXarKtKzsxsRHY9tWax5iZHn5oTjnySoqFl5IoDIuvdIjqQdvf3Lmk9GJhtw9EIxn2gLwB8FBHChktaujC2JnbdaZ3rq6cIltJBdZ0v0sZeF7jmDh54v/aXl9HzbBdfy9+QPsdFOqPOEOXENoYPF4caWIgUJTwl/o7CTI/EKvFp/RGuWorTfdX5F8nfl7f4HmdZ4drkxUVilfjG/uAt8ZU0bbsq3IYQ6VScctwSzwtrZbaFHRBeXNFGarE7RTq07mUZLM4zsS96Jlu9HrCVCt/JheOx3d8TQza8hAHDOhxbkqIM4dstPgNGL+RkG1oXyZ7hvC2PFa0/ZTvWO/IL3r3Zc8pXF9tPi/j1wrme8AaRrHUtghjyDMhx4CtXgann2pIY67NsqrRcn1xfUl/2QKs73vtRHzi63rlYTbO1phDcpJ86fbjVQaNhZeUbImSiNKPGwfHDuwvXhTmOn/mkvus6L3qx3KOECyert+Old9X06zJCK9tI7a4gkA=
  - secure: Wb7KRpFu3eK3bxlsCWSLlgp+Yk9rK4PbQUiG6qXTiCoeuL9huBm6nUixw2vbb8/i4h+0sUDX1HkQfE/HDHiHKvrZLLitFmRFAxKDEpqyy7rZS43DYv0nRpFnMhYS/N8Ds3uc+R5ngG05m9bUyLf4GK4Cl1S60x60N+EQ4TSWGje6fUzCbuooP74glYuyfJRGPajhnHlusThsMBUZcHM4yo8Uy5BOU2ZEz/vAoUHkSC5/aT3l9jZ7BWMA0iWq0YPxWHW+158jFVGd/WHc+zAjPadwnNe7aHODjmDB2NpxJNfHlImaP9ds0fevA6WZRSP+5DOUgwWKBMmZ6R0jtxOY2c/EI7p8Gwe5YQIaJtNO229stwGPsNheJn64QM2VLgCniEbkeNAaOGYrnObzThD/LciWgpfvCiAvTRBiAWTIUPCAo3iKOm3G889OQcyttIW3Ui9DYHhRgF2FgzYfX+dPGL4bBT7FiK96K9kSr2qngYXDVAcrpCXAcunA0fVwtW9j6s9Fg10HpvlQG9KO6WEkZbaEqrUFnyn+bFMF7eKS7dSXdkT2KdjJwK1lyba2cIOSyXJtzXItsRWUC0dF9qv9yDevjL/mNVwR4gTD10en4uLqvkgvTfNNxUOo5JQ4Spny4boF79LHNDHIg8TKTVsOIG3aRoP+lPU89B3yHJ9RRZs=
  - secure: jCR6RNBMiN/olb5NHgzhB/UWqLAfWv1neD5TUmjudMY70BSyPpt91DUsX+e/dRIxBeS766/SySj6XAnWsx9eQNnrEGBve2VeA8sne8dNzSKNe3e2AVaU8TxPEismSLuAsM14tVB8VxsyjhUdJVJvLKugsArdZtZ9qE0kIkCJRxPfsz3xXH9fKD6qIvRb9M0CILqsVTx5GA2zd8ROKyttqxD17IDs+68i7wd96E8HQH8JjhozStYEqPxwegeoGiU1eLewVh/F0VHsmMffNnc/U3AwQfcpaXY0UKoh8bQMNVJpi0Id4/wy/XqPwNKxfsI25g++EZ4Tqyh95qwxPiT9ydq+TXg1XptipZdmaRWmdZwSPGwVBrOdb1ttVbpEQUzXdLdkyyQM2b3J6WR6+GVVD4yP9OtYCSSvfYu4S2I8Lf0/BBiBRME0xG7NEmPQFpO9ztWMbh3WRnWNYiQt2Fg5z0SLm1hHrn2UcYLNvkdNdBCFQn2q/Ge7RoN/MPcdLzPRlfaesWEijGZNnWloUNN9jcWI9REhJUmS5ZfP3B3QhSPfAlAyfIg7wkIuIt98hG8YvM5eggLsYZ+vRZJuK5nh1gnvk8Jcr+sV61LN8L1XBxcFpOV4p2t8TtZacliFSKvGkWwqChHSf8d55nQgho9NGda1nrlM7+xCmgax416q7do=
script:
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f Dockerfile -t ${TRAVIS_REPO_SLUG,,}:$TAG .
after_success:
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- docker tag ${TRAVIS_REPO_SLUG,,}:$TAG ${TRAVIS_REPO_SLUG,,}:travis-$TRAVIS_BUILD_NUMBER
- docker push ${TRAVIS_REPO_SLUG,,}
